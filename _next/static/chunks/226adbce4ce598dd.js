(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18073,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(22016),n=e.i(19987),a=e.i(80314),l=e.i(25660),i=e.i(31925),o=e.i(94868),d=e.i(8587);let c="pendingSubmissionsCache";function m({initialTerms:e}){let[m,u]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[g,p]=(0,s.useState)(10),[f,b]=(0,s.useState)([]),{showUntranslated:y}=(0,n.useAppContext)(),{settings:j}=(0,a.useSettings)(),{showToast:v}=(0,l.useToast)(),[N,w]=(0,s.useState)([]),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=setTimeout(()=>{h(m)},300);return()=>{clearTimeout(e)}},[m]);let T=(0,s.useCallback)(e=>{S.current&&S.current.disconnect(),S.current=new IntersectionObserver(e=>{e[0].isIntersecting&&p(e=>e+10)}),e&&S.current.observe(e)},[]);(0,s.useEffect)(()=>{(async()=>{let t=[];try{t=(await (0,i.getPendingSubmissions)("https://github.com/hisyeo/gjcidlu")).submissions,localStorage.setItem(c,JSON.stringify(t))}catch(e){console.error("Error fetching pending submissions:",e),"object"==typeof e&&null!==e&&"isRateLimitError"in e&&e.isRateLimitError?v("GitHub API rate limit exceeded. Using cached pending data.","error"):v("Failed to fetch pending data. Using cached data if available.","error");try{let e=localStorage.getItem(c);e&&(t=JSON.parse(e))}catch(e){console.error("Failed to read from localStorage:",e)}}let s=new Set(e.map(e=>e.id));w(t.map(e=>(e.newTerms=e.newTerms?.filter(e=>!s.has(e.id)),e)).filter(e=>(e.newTerms?.length||0)>0||(e.newEntries?.length||0)>0))})()},[]);let C=(0,s.useMemo)(()=>{let t=j.userSystem&&j.userId?`${j.userSystem.toLowerCase()}:${j.userId}`:null,s=new Map,r=new Map;N.forEach(e=>{let n=(e.author?`${e.author.system.toLowerCase()}:${e.author.id}`:null)===t;e.newTerms?.forEach(t=>{s.set(t.id,{...t,status:"pending",prUrl:e.prUrl,topTranslations:{overall:null,minimal:null,specific:null,humorous:null},isCurrentUserSubmitter:n,latestEntryDate:new Date().toISOString()})}),e.newEntries?.forEach(t=>{let s=t.termId;r.has(s)||r.set(s,[]),r.get(s)?.push({...t,status:"pending",prUrl:e.prUrl})})});let n=e.map(e=>{let t=r.get(e.id)||[];return{...e,status:"published",entries:t}});return s.forEach((t,s)=>{e.some(e=>e.id===s)||n.push({...t,entries:r.get(s)||[]})}),n},[e,N,j]),U=(0,s.useMemo)(()=>{if(!C)return[];let e=x.toLowerCase();if(!e)return b([]),C;let t=(0,o.default)(e),s=[...t?.n||[],...t?.v||[],...t?.adj||[],...t?.adv||[]];return b(s.map(e=>({term:e,count:C.filter(t=>t.id.startsWith(e+"-")).length})).filter(e=>e.count>0)),C.filter(t=>t.id.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||s.some(e=>t.id.toLowerCase().includes(e)))},[x,C]),$=(0,s.useMemo)(()=>U.slice(0,g),[U,g]);return y?(0,t.jsx)("div",{children:"Untranslated view not yet updated for pending data."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search for a word or add a new one...",value:m,onChange:e=>u(e.target.value),className:"flex-grow rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none"}),(0,t.jsx)(r.default,{href:`/new-term?name=${encodeURIComponent(m)}`,className:"rounded-lg bg-blue-600 px-5 py-3 font-medium text-white hover:bg-blue-700",children:"Submit New"})]}),f.length>0&&(0,t.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:["Related search terms: ",f.map(e=>`'${e.term}' (${e.count} translations)`).join(", ")]}),(0,t.jsxs)("div",{className:"mt-6 space-y-8",children:[$.map((e,s)=>{let n=s===$.length-1,a="pending"===e.status,l=e.entries?.some(e=>"pending"===e.status),i=e.isCurrentUserSubmitter;return(0,t.jsxs)("div",{ref:n?T:null,className:`rounded-lg border bg-white ${a?"border-yellow-400":"border-gray-200"}`,children:[a&&!i&&(0,t.jsxs)("div",{className:"p-2 bg-yellow-100 text-yellow-800 text-sm rounded-t-lg flex justify-between items-center",children:[(0,t.jsx)("span",{children:"This term is pending review."}),e.prUrl&&(0,t.jsx)("a",{href:e.prUrl,target:"_blank",rel:"noopener noreferrer",className:"font-bold hover:underline",children:"View PR"})]}),l&&!a&&(0,t.jsx)("div",{className:"p-2 bg-blue-100 text-blue-800 text-sm rounded-t-lg",children:"This term has pending translations."}),i&&a&&(0,t.jsx)("div",{className:"p-2 bg-green-100 text-green-800 text-sm rounded-t-lg",children:"You submitted this term."}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:e.id.split("-")[0]}),(0,t.jsxs)("p",{className:"mb-1 font-mono text-gray-500",children:["(",e.pos.slice(0,1),".)"]}),(0,t.jsx)("p",{className:"mb-4 text-gray-700 italic",children:e.description}),!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"my-4 border-gray-100"}),(0,t.jsx)("h3",{className:"mb-3 text-sm font-semibold text-gray-500 uppercase",children:"Top Translations"}),(e=>{if(!e)return(0,t.jsx)("p",{className:"text-lg font-medium text-gray-500",children:"(No votes on published entries)"});let s="abugida"===j.script?"font-abugida":"syllabary"===j.script?"font-syllabary":"";return 0===Object.keys(e).filter(t=>null!==e[t]).map(t=>({category:t,translation:e[t]})).length?(0,t.jsx)("p",{className:"text-lg font-medium text-gray-500",children:"(No votes on published entries)"}):(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Overall"}),(0,t.jsx)("p",{className:`text-lg font-medium text-blue-600 ${e.overall?s:""}`,children:e.overall?(0,d.decode)(e.overall,j.script):"(No votes)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Minimal"}),(0,t.jsx)("p",{className:`text-lg font-medium text-blue-600 ${e.minimal?s:""}`,children:e.minimal?(0,d.decode)(e.minimal,j.script):"(No votes)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Specific"}),(0,t.jsx)("p",{className:`text-lg font-medium text-blue-600 ${e.specific?s:""}`,children:e.specific?(0,d.decode)(e.specific,j.script):"(No votes)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Humorous"}),(0,t.jsx)("p",{className:`text-lg font-medium text-blue-600 ${e.humorous?s:""}`,children:e.humorous?(0,d.decode)(e.humorous,j.script):"(No votes)"})]})]})})(e.topTranslations)]}),(0,t.jsx)("hr",{className:"my-4 border-gray-100"}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,t.jsxs)(r.default,{href:`/new-term?name=${encodeURIComponent(e.id.split("-")[0])}`,className:"flex items-center space-x-1 text-xs text-gray-500 hover:text-blue-600 focus:outline-none",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{children:"Add alternative meaning"})]}),a?(0,t.jsx)("span",{className:"rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-400 cursor-not-allowed",title:"Detail page not available for pending terms",children:"View Translations →"}):(0,t.jsx)(r.default,{href:`/term/${e.id}`,className:"rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200",children:"View Translations →"})]})]})]},e.id)}),0===U.length&&x&&(0,t.jsx)("div",{className:"text-center py-10",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No terms found matching your search."})})]})]})}e.s(["default",()=>m])}]);