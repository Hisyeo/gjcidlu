(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82072,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),i=e.i(22016),r=e.i(8587),l=e.i(30314),a=e.i(25660),n=e.i(80314),o=e.i(31925),d=e.i(94868),c=e.i(30911),m=e.i(82740),u=e.i(75157),h=e.i(16148),p=e.i(932);function x(){let e,i,r,l,a,n=(0,p.c)(10),[o,d]=(0,s.useState)(!1);return n[0]!==o?(e=()=>d(!o),n[0]=o,n[1]=e):e=n[1],n[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",children:(0,t.jsx)("path",{d:"M240-40v-329L110-580l185-300h370l185 300-130 211v329l-240-80-240 80Zm80-111 160-53 160 53v-129H320v129Zm20-649L204-580l136 220h280l136-220-136-220H340Zm98 383L296-558l57-57 85 85 169-170 57 56-226 227ZM320-280h320-320Z"})}),n[2]=i):i=n[2],n[3]!==e?(r=(0,t.jsx)("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:i}),n[3]=e,n[4]=r):r=n[4],n[5]!==o?(l=o&&(0,t.jsx)("div",{className:"absolute z-10 -ml-4 mt-2 w-screen max-w-sm transform px-4 sm:px-0 lg:max-w-lg",children:(0,t.jsx)("div",{className:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden",children:(0,t.jsx)("div",{className:"relative grid gap-8 bg-white p-7 lg:grid-cols-1",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Vote Category Meanings"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Overall"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["This translation is the best ",(0,t.jsx)("em",{children:"overall"})," translation of the term."]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Minimal"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["This translation is the best ",(0,t.jsx)("em",{children:"minimalist"})," translation of the term. Meaning that it's the most succinct while still achieving the necessary amount of specificity."]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Specific"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["This translation is the most ",(0,t.jsx)("em",{children:"specific"})," translation of the term. Meaning that it captures all of the nuance that the term holds in English."]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Humorous"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["This translation is the most ",(0,t.jsx)("em",{children:"humorous"})," translation of the term. Meaning that it made you laugh, simple as that!"]})]})]})})})}),n[5]=o,n[6]=l):l=n[6],n[7]!==r||n[8]!==l?(a=(0,t.jsxs)("div",{className:"relative",children:[r,l]}),n[7]=r,n[8]=l,n[9]=a):a=n[9],a}let g="pendingSubmissionsCache";function f({term:e,initialEntries:p,allTerms:f}){let[v,y]=(0,s.useState)(""),[b,j]=(0,s.useState)([]),{showToast:w}=(0,a.useToast)(),{settings:N}=(0,n.useSettings)(),[S,T]=(0,s.useState)([]),[E,I]=(0,s.useState)(!1),[M,C]=(0,s.useState)({overall:null,minimal:null,specific:null,humorous:null}),[L,V]=(0,s.useState)([]),[k,U]=(0,s.useState)([]),O=(0,c.useDebounce)(v,500),[$,F]=(0,s.useState)(!1),[A,H]=(0,s.useState)("newest");(0,s.useEffect)(()=>{F(!0)},[]);let D=(0,s.useMemo)(()=>{let t=N.userSystem&&N.userId?`${N.userSystem.toLowerCase()}:${N.userId}`:null;return Array.from(new Map([...p.map(e=>({...e,status:"published",prUrl:void 0,isCurrentUserSubmitter:e.submitter===t})),...S.map(e=>({...e,status:"pending-pr",votes:{overall:0,minimal:0,specific:0,humorous:0},isCurrentUserSubmitter:e.submitter===t})),...b.filter(t=>"NEW_ENTRY"===t.type&&t.payload.termId===e.id).map(e=>({...e.payload,status:"pending-queue",votes:{overall:0,minimal:0,specific:0,humorous:0},isCurrentUserSubmitter:!0}))].map(e=>[e.id,e])).values())},[p,S,b,e.id,N]),R=(e,t)=>(D.find(t=>t.id===e)?.votes[t]??0)+b.filter(s=>"VOTE"===s.type&&s.payload.entryId===e&&s.payload.voteType===t).length,_=(0,s.useMemo)(()=>{let e=[...D];switch(A){case"newest":return e.sort((e,t)=>new Date(t.created).getTime()-new Date(e.created).getTime());case"oldest":return e.sort((e,t)=>new Date(e.created).getTime()-new Date(t.created).getTime());case"overall-most":return e.sort((e,t)=>R(t.id,"overall")-R(e.id,"overall"));case"overall-least":return e.sort((e,t)=>R(e.id,"overall")-R(t.id,"overall"));case"minimal-most":return e.sort((e,t)=>R(t.id,"minimal")-R(e.id,"minimal"));case"minimal-least":return e.sort((e,t)=>R(e.id,"minimal")-R(t.id,"minimal"));case"specific-most":return e.sort((e,t)=>R(t.id,"specific")-R(e.id,"specific"));case"specific-least":return e.sort((e,t)=>R(e.id,"specific")-R(t.id,"specific"));case"humorous-most":return e.sort((e,t)=>R(t.id,"humorous")-R(e.id,"humorous"));case"humorous-least":return e.sort((e,t)=>R(e.id,"humorous")-R(t.id,"humorous"));default:return e}},[D,A]);(0,s.useEffect)(()=>{O.trim()?U((0,m.validateNounPhrase)(O)):U([])},[O]),(0,s.useEffect)(()=>{let t=e.id.split("-")[0],s=(0,d.default)(t),i=[...s?.n||[],...s?.v||[],...s?.adj||[],...s?.adv||[]],r=f.filter(s=>s.id!==e.id&&s.id.split("-")[0]===t),l=f.filter(t=>t.id!==e.id&&i.includes(t.id.split("-")[0])).map(e=>({term:e,count:(0,h.getEntriesForTerm)(e.id).length})).filter(e=>e.count>0);V(Array.from(new Map([...r.map(e=>({term:e,count:(0,h.getEntriesForTerm)(e.id).length})),...l].map(e=>[e.term.id,e])).values()))},[e,f]),(0,s.useEffect)(()=>{let e=()=>j((0,l.getQueue)());return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,s.useEffect)(()=>{(async()=>{let t=[];try{t=(await (0,o.getPendingSubmissions)("https://github.com/hisyeo/gjcidlu")).submissions,localStorage.setItem(g,JSON.stringify(t))}catch(e){console.error("Error fetching pending submissions:",e),"object"==typeof e&&null!==e&&"isRateLimitError"in e&&e.isRateLimitError?w("GitHub API rate limit exceeded. Using cached pending data.","error"):w("Failed to fetch pending data. Using cached data if available.","error");try{let e=localStorage.getItem(g);e&&(t=JSON.parse(e))}catch(e){console.error("Failed to read from localStorage:",e)}}T(t.flatMap(e=>e.newEntries?.map(t=>({...t,prUrl:e.prUrl}))||[]).filter(t=>t.termId===e.id))})()},[e.id]),(0,s.useEffect)(()=>{(async()=>{if(N.userId&&N.userSystem)try{let t=await fetch("/votes.json"),s=(await t.json())[e.id];if(s){let e=s[`${N.userSystem.toLowerCase()}:${N.userId}`];if(e){let t={overall:null,minimal:null,specific:null,humorous:null};for(let s in e){let i=e[s];if(i&&i.length>0){let e=i[i.length-1];t[s]={entryId:e.entry,date:e.voted}}}C(t)}}}catch(e){console.error("Failed to fetch or parse votes.json",e)}})()},[N,e.id]);let P=$&&"abugida"===N.script?"font-abugida":$&&"syllabary"===N.script?"font-syllabary":"";return(0,t.jsxs)(t.Fragment,{children:[L.length>0&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-100 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Related Terms"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:L.map(({term:s,count:r})=>{let l=s.id.split("-")[0]===e.id.split("-")[0];return(0,t.jsxs)(i.default,{href:`/term/${s.id}`,className:"text-blue-600 hover:underline",children:[s.id.split("-")[0],l&&(0,t.jsxs)("span",{className:"text-gray-500 text-sm",children:[" (",s.description,")"]})," ","(",r," translations)"]},s.id)})})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!v.trim()||k.length>0)return;let s=(0,r.encode)(v),i=(0,r.encodeToSnakeCaseSyllabary)(s),a=D.some(e=>e.id===i),n=b.some(t=>"NEW_ENTRY"===t.type&&t.payload.termId===e.id&&t.payload.id===i);if(a||n){w("This translation already exists or is pending review.","error"),I(!0);return}(0,l.addToQueue)({type:"NEW_ENTRY",payload:{id:i,termId:e.id,contents:s,created:new Date().toISOString()}}),y(""),I(!1),w("Translation added to queue!","success")},children:[(0,t.jsx)("input",{type:"text",spellCheck:"false",value:v,onChange:e=>{y(e.target.value),I(!1)},placeholder:"Add your Hîsyêô translation...",className:`w-full rounded-lg border p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none ${E?"border-red-500 focus:ring-red-500":"border-gray-300"}`}),k.length>0&&(0,t.jsx)("div",{className:"mt-2 text-sm text-red-600",children:(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{children:"Syntax errors found"}),(0,t.jsx)("ul",{className:"list-disc list-inside",children:k.map((e,s)=>(0,t.jsx)("li",{children:(0,u.decodeUnicode)(e.msg)},s))})]})}),(0,t.jsx)("button",{type:"submit",className:"mt-2 w-full rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!v.trim()||k.length>0,children:"Add to Submission Queue"})]})}),(0,t.jsx)("div",{className:"mx-auto max-w-2xl",children:(0,t.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold",children:["All Translations (",D.length,")"]}),(0,t.jsx)(x,{})]}),(0,t.jsxs)("select",{value:A,onChange:e=>H(e.target.value),className:"rounded-lg border border-gray-300 p-2",children:[(0,t.jsx)("option",{value:"newest",children:"Newest First"}),(0,t.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,t.jsx)("option",{value:"overall-most",children:"Overall (Most Votes)"}),(0,t.jsx)("option",{value:"overall-least",children:"Overall (Least Votes)"}),(0,t.jsx)("option",{value:"minimal-most",children:"Minimal (Most Votes)"}),(0,t.jsx)("option",{value:"minimal-least",children:"Minimal (Least Votes)"}),(0,t.jsx)("option",{value:"specific-most",children:"Specific (Most Votes)"}),(0,t.jsx)("option",{value:"specific-least",children:"Specific (Least Votes)"}),(0,t.jsx)("option",{value:"humorous-most",children:"Humorous (Most Votes)"}),(0,t.jsx)("option",{value:"humorous-least",children:"Humorous (Least Votes)"})]})]}),_.map(s=>{let i="pending-pr"===s.status,a="pending-queue"===s.status,n=i||a,o=s.isCurrentUserSubmitter;return(0,t.jsxs)("div",{className:`rounded-lg border bg-white ${n?"border-yellow-400":"border-gray-200"}`,children:[n&&(0,t.jsxs)("div",{className:"p-2 bg-yellow-100 text-yellow-800 text-sm rounded-t-lg flex justify-between items-center",children:[(0,t.jsx)("span",{children:i?"This translation is pending review.":"This translation is in your submission queue."}),i&&s.prUrl&&(0,t.jsx)("a",{href:s.prUrl,target:"_blank",rel:"noopener noreferrer",className:"font-bold hover:underline",children:"View PR"})]}),o&&!n&&(0,t.jsx)("div",{className:"p-2 bg-green-100 text-green-800 text-sm rounded-t-lg",children:"You submitted this translation."}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,t.jsx)("p",{className:`text-2xl font-medium text-gray-900 ${P}`,children:$?(0,r.decode)(s.contents,N.script):(0,r.decode)(s.contents,"latin")}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[s.sourceFile&&(0,t.jsx)("a",{href:`https://github.com/hisyeo/gjcidlu/blob/main/rsc/submissions/${s.sourceFile}`,target:"_blank",rel:"noopener noreferrer",title:"View source submission file",className:"rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-blue-600",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,t.jsx)("button",{onClick:()=>{var e;return e=s.contents,void(y((0,r.decode)(e,"latin")),I(!1))},title:"Modify this translation",className:"rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 hover:text-blue-600",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["overall","minimal","specific","humorous"].map(i=>{let a,o=(a=s.id,b.some(t=>"VOTE"===t.type&&t.payload.termId===e.id&&t.payload.voteType===i&&t.payload.entryId===a)),d=M[i],c=d?.entryId===s.id,m="border border-gray-400 px-3 py-1 text-sm rounded-md";o?m="bg-yellow-400 text-black px-3 py-1 text-sm rounded-md":c&&(m="bg-blue-500 text-white px-3 py-1 text-sm rounded-md");let u=c?`You voted for this on ${new Date(d.date).toLocaleDateString()}`:"";return(0,t.jsxs)("button",{onClick:()=>((t,s)=>{let i=M[s];if(i&&i.entryId===t)return void w("This vote has already been submitted.","error");let a=b.find(t=>"VOTE"===t.type&&t.payload.termId===e.id&&t.payload.voteType===s);if(a&&((0,l.removeFromQueue)(a.id),a.payload.entryId===t)||i&&i.entryId!==t&&!window.confirm(`Are you sure you want to change your '${s}' vote?`))return;(0,l.addToQueue)({type:"VOTE",payload:{termId:e.id,entryId:t,voteType:s}});let n=D.find(e=>e.id===t),o=n?(0,r.decode)(n.contents,N.script):t;w(`Vote for '${s}' on entry '${o}' added to queue!`,"success")})(s.id,i),className:m,disabled:n,title:u,children:[i.charAt(0).toUpperCase()+i.slice(1)," (",R(s.id,i),")"]},i)})})]})]},s.id)})]})})]})}e.s(["default",()=>f],82072)}]);